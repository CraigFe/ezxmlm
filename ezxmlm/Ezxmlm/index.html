<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ezxmlm (ezxmlm.Ezxmlm)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">ezxmlm</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Ezxmlm</span></h1></header><p>An &quot;easy&quot; interface on top of the <code class="code">Xmlm</code> library.</p><p>This version provides more convenient (but less flexible) input and output
functions that go to and from string values. This avoids the need to write signal code,
which is useful for quick scripts that manipulate XML.</p><p>More advanced users should go straight to the <code class="code">Xmlm</code> library and use it
directly, rather than be saddled with the Ezxmlm interface below.</p><h3>Basic types</h3><div class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>node</code><code><span class="keyword"> = </span><span class="type-var">'a</span> Xmlm.frag<span class="keyword"> as </span>a Xmlm.frag</code><code></code></div><div class="doc"><p>The type of a single XML tag</p></div></div><div class="spec type" id="type-nodes"><a href="#type-nodes" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>nodes</code><code><span class="keyword"> = </span><a href="index.html#type-node">node</a> list</code><code></code></div><div class="doc"><p>The type of a list of XML tags</p></div></div><div class="spec exception" id="exception-Tag_not_found"><a href="#exception-Tag_not_found" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Tag_not_found</span><span class="keyword"> of </span>string</code></div><div class="doc"><p>Raised by the query combinators</p></div></div><h3>Reading XML values</h3><div class="spec val" id="val-from_channel"><a href="#val-from_channel" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>from_channel : Pervasives.in_channel <span class="keyword">&#8209;&gt;</span> Xmlm.dtd<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Read an XML document from an <code class="code">in_channel</code></p></div></div><div class="spec val" id="val-from_string"><a href="#val-from_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>from_string : string <span class="keyword">&#8209;&gt;</span> Xmlm.dtd<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Read an XML document directly from a <code class="code">string</code></p></div></div><div class="spec val" id="val-from_input"><a href="#val-from_input" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>from_input : Xmlm.input <span class="keyword">&#8209;&gt;</span> Xmlm.dtd<span class="keyword"> * </span><a href="index.html#type-node">node</a></code></div><div class="doc"><p>Low-level function to read directly from an <code class="code">Xmlm</code> input source</p></div></div><h3>Writing XML values</h3><div class="spec val" id="val-to_channel"><a href="#val-to_channel" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_channel : Pervasives.out_channel <span class="keyword">&#8209;&gt;</span> Xmlm.dtd <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Write an XML document to an <code class="code">out_channel</code></p></div></div><div class="spec val" id="val-to_string"><a href="#val-to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_string : ?&#8288;dtd:string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Write an XML document to a <code class="code">string</code>. This goes via an intermediate
<code class="code">Buffer</code> and so may be slow on large documents.</p></div></div><div class="spec val" id="val-to_output"><a href="#val-to_output" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_output : Xmlm.output <span class="keyword">&#8209;&gt;</span> (Xmlm.dtd<span class="keyword"> * </span><a href="index.html#type-node">node</a>) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Low-level function to write directly to an <code class="code">Xmlm</code> output source</p></div></div><h3>Attribute handling</h3><div class="spec val" id="val-filter_attrs"><a href="#val-filter_attrs" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter_attrs : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a>) list <span class="keyword">&#8209;&gt;</span> (Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a>) list</code></div><div class="doc"><p>Given some selected attributes and nodes (usually from <code class="code">members_with_attr</code>)
return the ones that match the <code class="code">class</code> and <code class="code">value</code> supplied.</p></div></div><div class="spec val" id="val-filter_attr"><a href="#val-filter_attr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter_attr : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a>) list <span class="keyword">&#8209;&gt;</span> Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Given some selected attributes and nodes (usually from <code class="code">members_with_attr</code>)
return the first that matches the <code class="code">class</code> and <code class="code">value</code> supplied.
Raises <code class="code">Not_found</code> if nothing matches.</p></div></div><div class="spec val" id="val-mem_attr"><a href="#val-mem_attr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mem_attr : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> Xmlm.attribute list <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">mem_attr name value attrs</code> returns true if the <code class="code">name</code> key is
with value <code class="code">value</code> is present in the <code class="code">attrs</code> attribute list.</p></div></div><div class="spec val" id="val-get_attr"><a href="#val-get_attr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_attr : string <span class="keyword">&#8209;&gt;</span> Xmlm.attribute list <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">get_attr name attrs</code> returns the value associated with key
<code class="code">name</code> in the <code class="code">attrs</code> attribute list.
Raised <code class="code">Not_found</code> if the attribute is not present.</p></div></div><h3>Selectors and utility functions</h3><div class="spec val" id="val-pick_tags"><a href="#val-pick_tags" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pick_tags : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p><code class="code">pick_tags tag attr value</code> selects all the child nodes that
match the <code class="code">tag</code> name and contain an attribute with name <code class="code">tag</code>
and <code class="code">value</code>.</p></div></div><div class="spec val" id="val-pick_tag"><a href="#val-pick_tag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pick_tag : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"><p><code class="code">pick_tag tag attr value</code> selects the first child node that
matches the <code class="code">tag</code> name and contain an attribute with name <code class="code">tag</code>
and <code class="code">value</code>.
Raises <code class="code">Not_found</code> if no such node exists.</p></div></div><div class="spec val" id="val-hd"><a href="#val-hd" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>hd : <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"><p>Return the first tag in the list of nodes.
Raised <code class="code">Not_found</code> if the nodes are empty</p></div></div><div class="spec val" id="val-tl"><a href="#val-tl" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tl : <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Return all the tags but the first one in a list of nodes.
Returns an empty list if the list is empty.</p></div></div><div class="spec val" id="val-make_tag"><a href="#val-make_tag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make_tag : string <span class="keyword">&#8209;&gt;</span> (Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-node">node</a></code></div><div class="doc"><p>Make a tag given a <code class="code">tag</code> name and body attributes and nodes</p></div></div><div class="spec val" id="val-data_to_string"><a href="#val-data_to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>data_to_string : <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Convert a list of <code class="code">`Data</code> fragments to a human-readable string. Any elements
within the list are ignored, and multiple <code class="code">`Data</code> fragments are concatenated.</p></div></div><div class="spec val" id="val-members_with_attr"><a href="#val-members_with_attr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>members_with_attr : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> (Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a>) list</code></div><div class="doc"><p>Extracts the immediate subnodes that match the given <code class="code">tag</code> name and return
a tuple of the attributes associated with that tag and its child nodes.</p></div></div><div class="spec val" id="val-members"><a href="#val-members" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>members : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> list</code></div><div class="doc"><p>Extracts the immediate subnodes that match the given <code class="code">tag</code> name, and only return
the contents of those tags (ignoring the attributes, which can be retrieved via
the <code class="code">members_with_attr</code> function</p></div></div><div class="spec val" id="val-member_with_attr"><a href="#val-member_with_attr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>member_with_attr : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> Xmlm.attribute list<span class="keyword"> * </span><a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Extracts the first subnode that match the given <code class="code">tag</code> name, and raises
<code class="code">Tag_not_found</code> if it can't find it.</p></div></div><div class="spec val" id="val-member"><a href="#val-member" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>member : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Extracts the first subnode that match the given <code class="code">tag</code> name, and raises
<code class="code">Tag_not_found</code> if it can't find it. Only the contents of the tag are
returned (ignoring the attributes, which can be retrieved via the
<code class="code">member_with_attr</code> function instead</p></div></div><div class="spec val" id="val-has_member"><a href="#val-has_member" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>has_member : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">has_member tag subnodes</code> returns true if the given <code class="code">tag</code> name is
present among the subnodes and false if it can't find it.</p></div></div><div class="spec val" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter_map : tag:string <span class="keyword">&#8209;&gt;</span> f:(Xmlm.attribute list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a></code></div><div class="doc"><p>Traverses XML nodes and applies <code class="code">f</code> to any tags that match the <code class="code">tag</code> parameter.
The result of the transformations is returned as a new set of nodes.</p></div></div><div class="spec val" id="val-filter_iter"><a href="#val-filter_iter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter_iter : tag:string <span class="keyword">&#8209;&gt;</span> f:(Xmlm.attribute list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nodes">nodes</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Traverses XML nodes and applies <code class="code">f</code> to any tags that match the <code class="code">tag</code> parameter.</p></div></div></body></html>